<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sv ARC - Vergaderruimte Overzicht</title>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
    <div class="header">
        <div class="logo">
            <img src="https://website.storage/Data/ARC/RTE/Afbeeldingen/Algemeen/Jubileumlogo_DEF.jpg" alt="sv ARC">
            <span class="logo-text">sv ARC</span>
        </div>
        <div class="header-right">
            <div class="clock" id="clock" onclick="window.location.href='/arcrooms/admin'" style="cursor: pointer;" title="Klik om beschikbaarheid te bewerken"></div>
        </div>
    </div>
    <div class="container">
        <div class="left-panel">
            <h1>VERGADERINGEN VANDAAG</h1>
            <div class="date" id="currentDate"></div>
            <div id="todayMeetings" class="loading">Laden...</div>
        </div>
        <div class="right-panel">
            <div class="right-panel-top">
                <h1>DEZE WEEK</h1>
                <div class="calendar-grid" id="weekCalendar"></div>
            </div>
                        <div class="right-panel-bottom">
                <h1 style="margin-bottom: 15px;">BESCHIKBAARHEID KOMENDE 10 DAGEN</h1>
        </div>
    </div>

    <!-- Meeting Details Modal -->
    <div id="meetingDetailsModal" class="modal">
        <div class="modal-content">
            <div id="detailsSuccessMessage" class="success-message"></div>
            <div id="detailsErrorMessage" class="error-message"></div>
            <div class="modal-header" id="detailsModalTitle">Vergadering Details</div>
            
            <div id="meetingDetailsContent"></div>
            
            <div class="form-buttons">
                <button type="button" class="btn btn-secondary" onclick="closeMeetingDetailsModal()">Sluiten</button>
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <div id="successMessage" class="success-message"></div>
            <div id="errorMessage" class="error-message"></div>
            <div class="modal-header">Vergadering Aanvragen</div>
            
            {% if user %}
            <div class="logged-in-notice">
                ‚úì Ingelogd als <strong>{{ user.name }}</strong> ({{ user.email }})
                <a href="/arcrooms/logout" style="float: right; color: #155724; text-decoration: underline;">Uitloggen</a>
            </div>
            {% else %}
            <div style="text-align: center; padding: 20px; background: #fff3cd; border-radius: 8px; margin-bottom: 20px;">
                <p style="margin-bottom: 15px; color: #856404;">‚ö†Ô∏è Inloggen verplicht om een vergadering te boeken</p>
                <a href="/arcrooms/login?redirect=booking" class="btn-login">
                    üîê Inloggen met sv ARC Account
                </a>
            </div>
            {% endif %}
            
            <form id="bookingForm" {% if not user %}style="display: none;"{% endif %}>
                <div class="form-group">
                    <label>Ruimte</label>
                    <input type="text" id="modalRoom" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label>Datum</label>
                    <input type="text" id="modalDate" readonly style="background: #f5f5f5;">
                </div>
                <div class="form-group">
                    <label>Starttijd *</label>
                    <select id="startTime" required>
                        <option value="">-- Selecteer starttijd --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Eindtijd *</label>
                    <select id="endTime" required>
                        <option value="">-- Selecteer eindtijd --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Onderwerp *</label>
                    <input type="text" id="subject" required placeholder="Bijv. Teamvergadering">
                </div>
                <div class="form-group">
                    <label>Opmerking</label>
                    <textarea id="notes" rows="3" placeholder="Extra informatie of speciale wensen"></textarea>
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Annuleren</button>
                    <button type="submit" class="btn btn-primary">Vergadering Boeken</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Template variables from server
        const isLoggedIn = {{ 'true' if user else 'false' }};
        const loginRedirect = {{ ('true' if user and session.get("login_redirect") == "booking" else 'false') }};
    </script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
